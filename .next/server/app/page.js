(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1816:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>c,pages:()=>u,routeModule:()=>g,tree:()=>d}),a(908),a(1506),a(5866);var r=a(3191),o=a(8716),s=a(7922),n=a.n(s),i=a(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,908)),"D:\\next_js\\next-js-flashcard-app\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"D:\\next_js\\next-js-flashcard-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],u=["D:\\next_js\\next-js-flashcard-app\\app\\page.tsx"],c="/page",h={require:a,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2237:()=>{},988:(e,t,a)=>{Promise.resolve().then(a.bind(a,3607))},2122:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},3607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r,o,s=a(326),n=a(7577);function i(e,t){let[a,r]=(0,n.useState)(t),[o,s]=(0,n.useState)(!1),i=(0,n.useCallback)(t=>{try{let o=t instanceof Function?t(a):t;r(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(t){console.warn(`Error setting localStorage key "${e}":`,t)}},[e,a]);return[a,i,(0,n.useCallback)(()=>{try{window.localStorage.removeItem(e),r(t)}catch(t){console.warn(`Error removing localStorage key "${e}":`,t)}},[e,t]),o]}(function(e){e.FEED="FEED",e.FOCUS="FOCUS"})(r||(r={})),function(e){e.QUOTES="quotes",e.POEMS="poems",e.CUSTOM="custom"}(o||(o={}));let l=JSON.parse('[{"id":1,"question":"A man is great not because he hasn\'t failed;","answer":"a man is great because failure hasn\'t stopped him.","author":null,"category":"perseverance"},{"id":2,"question":"Be so disciplined","answer":"it looks like madness.","author":null,"category":"discipline"},{"id":3,"question":"Time is the only currency you spend without knowing the balance.","answer":"Use it wisely.","author":"Nicholas John","category":"time"},{"id":4,"question":"Big dreams require","answer":"big sacrifices.","author":null,"category":"dreams"},{"id":5,"question":"The rarest of all human qualities is","answer":"consistency.","author":"Jeremy Bentham","category":"consistency"},{"id":6,"question":"Life is 10% what happens to you and","answer":"90% how you react to it.","author":"Charles R. Swindoll","category":"mindset"},{"id":7,"question":"If you fail, congratulations.","answer":"Most people don\'t even try.","author":null,"category":"perseverance"},{"id":8,"question":"You\'re not stuck. You\'re just too scared to move.","answer":"Do it anyway.","author":null,"category":"action"},{"id":9,"question":"If you don\'t separate from your distractions,","answer":"your distractions will separate you from your goals.","author":null,"category":"focus"},{"id":10,"question":"Knowledge isn\'t power","answer":"until it\'s applied.","author":"Dale Carnegie","category":"action"},{"id":11,"question":"Comfort kills more dreams","answer":"than failure ever will.","author":null,"category":"growth"},{"id":12,"question":"Learn the rules like a pro,","answer":"so you can break them like an artist.","author":"Pablo Picasso","category":"creativity"},{"id":13,"question":"Clarity doesn\'t come before action.","answer":"It comes from action.","author":"Rumi","category":"action"},{"id":14,"question":"Not every closed door is locked.","answer":"Push.","author":null,"category":"perseverance"},{"id":15,"question":"Weak people envy.","answer":"Strong people study.","author":null,"category":"mindset"},{"id":16,"question":"Definition of discipline:","answer":"Do it motivated. Do it unmotivated.","author":null,"category":"discipline"},{"id":17,"question":"Discipline can fix","answer":"80% of your problems.","author":null,"category":"discipline"},{"id":18,"question":"When you face your fears, they shrink","answer":"and you grow.","author":"Jay Bennett","category":"growth"},{"id":19,"question":"Don\'t fall in love with success.","answer":"Fall in love with the habits that bring success.","author":null,"category":"habits"},{"id":20,"question":"Positivity is","answer":"a superpower.","author":null,"category":"mindset"},{"id":21,"question":"Confidence comes from","answer":"being prepared.","author":"John Wooden","category":"confidence"},{"id":22,"question":"Your future is shaped by the habits you repeat,","answer":"not the goals you set.","author":null,"category":"habits"},{"id":23,"question":"Stop thinking about it—","answer":"do it.","author":null,"category":"action"},{"id":24,"question":"Everyone has ideas.","answer":"Few have the discipline to turn them into reality.","author":null,"category":"discipline"},{"id":25,"question":"A lot goes wrong","answer":"before everything goes right.","author":null,"category":"perseverance"},{"id":26,"question":"You will be free once you realize","answer":"the cage was made of thoughts.","author":null,"category":"mindset"},{"id":27,"question":"Your life changes when","answer":"your habits change.","author":null,"category":"habits"},{"id":28,"question":"Surround yourself with people who have bigger goals than you.","answer":"Ambition is contagious.","author":"Mike Leber","category":"growth"},{"id":29,"question":"Winners focus on effort.","answer":"Losers wait for motivation.","author":null,"category":"discipline"},{"id":30,"question":"If the WHY is powerful,","answer":"the HOW is easy.","author":"Jim Rohn","category":"purpose"},{"id":31,"question":"Stay busy,","answer":"so you don\'t have time to be sad.","author":null,"category":"action"},{"id":32,"question":"Keep every stone they throw at you.","answer":"You got castles to build.","author":null,"category":"perseverance"},{"id":33,"question":"You don\'t need a perfect plan—","answer":"you just need a first step.","author":null,"category":"action"},{"id":34,"question":"Those who keep learning","answer":"will keep rising in life.","author":"Charlie Munger","category":"growth"},{"id":35,"question":"The measure of intelligence is","answer":"the ability to change.","author":"Albert Einstein","category":"growth"},{"id":36,"question":"Winners don\'t wait for motivation;","answer":"they create it.","author":null,"category":"discipline"},{"id":37,"question":"If you\'re not consistent,","answer":"you\'re not serious.","author":null,"category":"consistency"},{"id":38,"question":"The future belongs to those who believe in","answer":"the beauty of their dreams.","author":"Eleanor Roosevelt","category":"dreams"},{"id":39,"question":"Consistency is what transforms average","answer":"into excellence.","author":"Tony Robbins","category":"consistency"},{"id":40,"question":"A bad system will beat","answer":"a good person every time.","author":"W. Edwards Deming","category":"systems"},{"id":41,"question":"Don\'t spend major time","answer":"on minor things.","author":"Jim Rohn","category":"focus"},{"id":42,"question":"Being ready is a myth.","answer":"You start. You suck. You try again. You get better.","author":null,"category":"action"},{"id":43,"question":"Ugly action beats","answer":"unfinished perfection.","author":null,"category":"action"},{"id":44,"question":"If you wait until you feel better to start living,","answer":"you might be waiting forever.","author":null,"category":"action"},{"id":45,"question":"You can\'t let your failures define you.","answer":"You have to let your failures teach you.","author":null,"category":"perseverance"},{"id":46,"question":"Don\'t be jealous of people,","answer":"be inspired.","author":null,"category":"mindset"},{"id":47,"question":"You\'ll never feel ready.","answer":"Do it anyway.","author":null,"category":"action"},{"id":48,"question":"You must be willing to go to war with yourself","answer":"and create a new identity.","author":"David Goggins","category":"growth"},{"id":49,"question":"Hard times","answer":"build character.","author":null,"category":"perseverance"}]'),d=JSON.parse('[{"id":1,"question":"海内存知己，","answer":"天涯若比邻。","author":"王勃《送杜少府之任蜀州》","category":"友情"},{"id":2,"question":"会当凌绝顶，","answer":"一览众山小。","author":"杜甫《望岳》","category":"志向"},{"id":3,"question":"春蚕到死丝方尽，","answer":"蜡炬成灰泪始干。","author":"李商隐《无题》","category":"奉献"},{"id":4,"question":"落红不是无情物，","answer":"化作春泥更护花。","author":"龚自珍《己亥杂诗》","category":"奉献"},{"id":5,"question":"人生自古谁无死，","answer":"留取丹心照汗青。","author":"文天祥《过零丁洋》","category":"爱国"},{"id":6,"question":"长风破浪会有时，","answer":"直挂云帆济沧海。","author":"李白《行路难》","category":"志向"},{"id":7,"question":"千磨万击还坚劲，","answer":"任尔东西南北风。","author":"郑燮《竹石》","category":"坚韧"},{"id":8,"question":"不畏浮云遮望眼，","answer":"自缘身在最高层。","author":"王安石《登飞来峰》","category":"志向"},{"id":9,"question":"山重水复疑无路，","answer":"柳暗花明又一村。","author":"陆游《游山西村》","category":"哲理"},{"id":10,"question":"沉舟侧畔千帆过，","answer":"病树前头万木春。","author":"刘禹锡《酬乐天扬州初逢席上见赠》","category":"哲理"},{"id":11,"question":"问渠那得清如许，","answer":"为有源头活水来。","author":"朱熹《观书有感》","category":"学习"},{"id":12,"question":"纸上得来终觉浅，","answer":"绝知此事要躬行。","author":"陆游《冬夜读书示子聿》","category":"学习"},{"id":13,"question":"黑发不知勤学早，","answer":"白首方悔读书迟。","author":"颜真卿《劝学》","category":"学习"},{"id":14,"question":"少壮不努力，","answer":"老大徒伤悲。","author":"汉乐府《长歌行》","category":"勤奋"},{"id":15,"question":"宝剑锋从磨砺出，","answer":"梅花香自苦寒来。","author":"《警世贤文》","category":"坚韧"},{"id":16,"question":"欲穷千里目，","answer":"更上一层楼。","author":"王之涣《登鹳雀楼》","category":"志向"},{"id":17,"question":"路漫漫其修远兮，","answer":"吾将上下而求索。","author":"屈原《离骚》","category":"求索"},{"id":18,"question":"天生我材必有用，","answer":"千金散尽还复来。","author":"李白《将进酒》","category":"自信"},{"id":19,"question":"粉骨碎身浑不怕，","answer":"要留清白在人间。","author":"于谦《石灰吟》","category":"品格"},{"id":20,"question":"千淘万漉虽辛苦，","answer":"吹尽狂沙始到金。","author":"刘禹锡《浪淘沙》","category":"坚韧"},{"id":21,"question":"莫愁前路无知己，","answer":"天下谁人不识君。","author":"高适《别董大》","category":"友情"},{"id":22,"question":"但愿人长久，","answer":"千里共婵娟。","author":"苏轼《水调歌头》","category":"思念"},{"id":23,"question":"生当作人杰，","answer":"死亦为鬼雄。","author":"李清照《夏日绝句》","category":"志向"},{"id":24,"question":"横眉冷对千夫指，","answer":"俯首甘为孺子牛。","author":"鲁迅《自嘲》","category":"品格"},{"id":25,"question":"出淤泥而不染，","answer":"濯清涟而不妖。","author":"周敦颐《爱莲说》","category":"品格"},{"id":26,"question":"先天下之忧而忧，","answer":"后天下之乐而乐。","author":"范仲淹《岳阳楼记》","category":"爱国"},{"id":27,"question":"老骥伏枥，志在千里；","answer":"烈士暮年，壮心不已。","author":"曹操《龟虽寿》","category":"志向"},{"id":28,"question":"采得百花成蜜后，","answer":"为谁辛苦为谁甜。","author":"罗隐《蜂》","category":"奉献"},{"id":29,"question":"不识庐山真面目，","answer":"只缘身在此山中。","author":"苏轼《题西林壁》","category":"哲理"},{"id":30,"question":"野火烧不尽，","answer":"春风吹又生。","author":"白居易《赋得古原草送别》","category":"坚韧"},{"id":31,"question":"谁言寸草心，","answer":"报得三春晖。","author":"孟郊《游子吟》","category":"亲情"},{"id":32,"question":"读书破万卷，","answer":"下笔如有神。","author":"杜甫《奉赠韦左丞丈二十二韵》","category":"学习"},{"id":33,"question":"书山有路勤为径，","answer":"学海无涯苦作舟。","author":"韩愈","category":"学习"},{"id":34,"question":"业精于勤荒于嬉，","answer":"行成于思毁于随。","author":"韩愈《进学解》","category":"勤奋"},{"id":35,"question":"江山代有才人出，","answer":"各领风骚数百年。","author":"赵翼《论诗》","category":"哲理"},{"id":36,"question":"位卑未敢忘忧国，","answer":"事定犹须待阖棺。","author":"陆游《病起书怀》","category":"爱国"},{"id":37,"question":"苟利国家生死以，","answer":"岂因祸福避趋之。","author":"林则徐《赴戍登程口占示家人》","category":"爱国"},{"id":38,"question":"博观而约取，","answer":"厚积而薄发。","author":"苏轼《稼说送张琥》","category":"学习"},{"id":39,"question":"人有悲欢离合，","answer":"月有阴晴圆缺。","author":"苏轼《水调歌头》","category":"哲理"},{"id":40,"question":"莫等闲，白了少年头，","answer":"空悲切。","author":"岳飞《满江红》","category":"勤奋"}]'),u={[o.QUOTES]:l,[o.POEMS]:d,[o.CUSTOM]:[]},c=[{id:o.QUOTES,name:"智慧名言",description:"励志名言警句"},{id:o.POEMS,name:"古诗词",description:"中华经典诗词名句"},{id:o.CUSTOM,name:"自定义",description:"AI 生成的问答"}],h={revealedIds:new Set,viewMode:r.FOCUS,currentIndex:0,dataSet:o.QUOTES};function g(e){let t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}let x=(0,n.memo)(function({currentDataSet:e,onSelect:t}){return s.jsx("select",{value:e,onChange:e=>t(e.target.value),className:"bg-slate-700 text-slate-200 text-xs font-semibold px-3 py-1.5 rounded-lg border border-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:c.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))})}),y=(0,n.memo)(function({viewMode:e,setViewMode:t,progress:a,onReset:o,currentDataSet:n,onDataSetChange:i,onUploadClick:l}){return s.jsx("header",{className:"sticky top-0 z-50 bg-slate-800/80 backdrop-blur-xl border-b border-slate-700",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[(0,s.jsxs)("button",{onClick:o,className:"flex items-center space-x-2 hover:opacity-80 transition-opacity cursor-pointer","aria-label":"重置进度",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold",children:"E"}),s.jsx("h1",{className:"hidden sm:block text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"智慧回响"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s.jsx(x,{currentDataSet:n,onSelect:i}),s.jsx("button",{onClick:l,className:"px-3 py-1.5 text-xs font-semibold rounded-lg bg-indigo-600 text-white hover:bg-indigo-500 transition",children:"+ 生成"}),(0,s.jsxs)("nav",{className:"flex bg-slate-700 p-1 rounded-xl",role:"tablist",children:[s.jsx("button",{role:"tab","aria-selected":e===r.FOCUS,onClick:()=>t(r.FOCUS),className:`px-3 sm:px-4 py-1.5 text-xs font-semibold rounded-lg transition-all ${e===r.FOCUS?"bg-slate-600 shadow-sm text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"专注"}),s.jsx("button",{role:"tab","aria-selected":e===r.FEED,onClick:()=>t(r.FEED),className:`px-3 sm:px-4 py-1.5 text-xs font-semibold rounded-lg transition-all ${e===r.FEED?"bg-slate-600 shadow-sm text-indigo-400":"text-slate-400 hover:text-slate-200"}`,children:"列表"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[s.jsx("div",{className:"h-2 w-24 bg-slate-700 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":Math.round(a),"aria-valuemin":0,"aria-valuemax":100,children:s.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-1000",style:{width:`${a}%`}})}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-slate-500",children:[Math.round(a),"%"]})]})]})]})})}),m=(0,n.memo)(function({quote:e,isRevealed:t,onReveal:a,onMastered:r,isFocusMode:o}){if(!e)return s.jsx("div",{className:`bg-slate-800 p-6 rounded-2xl border border-slate-700 text-slate-500 text-center ${o?"w-full max-w-2xl p-10":""}`,children:"暂无数据"});let n=()=>{t||a(e.id)};return s.jsx("div",{onClick:n,role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&n(),"aria-label":t?"已揭示答案":"点击揭示答案",className:`group relative overflow-hidden transition-all duration-500 ease-out cursor-pointer
        ${o?"w-full max-w-2xl bg-slate-800/80 backdrop-blur-md p-10 rounded-3xl shadow-2xl border border-slate-700":"bg-slate-800 p-6 rounded-2xl shadow-sm hover:shadow-lg border border-slate-700"}`,children:(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[s.jsx("div",{className:"text-indigo-500/30 text-4xl font-serif select-none",children:'"'}),s.jsx("div",{className:`font-serif leading-relaxed text-slate-200 ${o?"text-3xl":"text-xl"}`,children:e.question}),s.jsx("div",{className:"relative pt-2",children:s.jsx("div",{className:`transition-all duration-700 ease-in-out font-serif italic text-indigo-400 leading-relaxed
            ${t?"opacity-100 translate-y-0 filter-none":"opacity-40 blur-md select-none translate-y-2"}
            ${o?"text-3xl":"text-xl"}`,children:e.answer})}),(0,s.jsxs)("div",{className:`pt-4 flex items-center justify-between ${t?"opacity-100":"opacity-0"} transition-opacity duration-500`,children:[(0,s.jsxs)("div",{className:"text-slate-500 text-sm font-medium",children:["— ",e.author||"佚名"]}),r&&s.jsx("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"px-3 py-1 text-xs font-medium text-red-400 bg-red-900/30 rounded-lg hover:bg-red-900/50 transition","aria-label":"删除此卡片",children:"删除"})]})]})})});function p({onGenerated:e}){let[t,a]=(0,n.useState)(!1),[r,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(""),d=(0,n.useRef)(null),u=async e=>{let t=e.target.files?.[0];t&&l(await t.text())},c=async()=>{if(!i.trim()){o("请输入或上传内容");return}a(!0),o(null);try{let t=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:i,count:10})}),a=await t.json();if(!t.ok)throw Error(a.error);e(a.data),l("")}catch(e){o(e instanceof Error?e.message:"生成失败")}finally{a(!1)}};return(0,s.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:"\uD83D\uDCDA 从内容生成问答卡片"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("input",{ref:d,type:"file",accept:".txt,.md,.json",onChange:u,className:"hidden"}),s.jsx("button",{onClick:()=>d.current?.click(),className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg text-sm hover:bg-slate-600 transition",children:"上传文件 (.txt, .md)"})]}),s.jsx("textarea",{value:i,onChange:e=>l(e.target.value),placeholder:"或直接粘贴学习内容...",className:"w-full h-40 bg-slate-900 text-slate-300 rounded-lg p-4 text-sm border border-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"}),r&&s.jsx("p",{className:"text-red-400 text-sm",children:r}),s.jsx("button",{onClick:c,disabled:t||!i.trim(),className:"w-full py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition",children:t?"生成中...":"✨ 生成问答卡片"})]})]})}function w(){return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}function b(){return s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}function f(){let{state:e,dispatch:t,progress:a,reset:l,currentData:d,setDataSet:c,setCustomQuotes:x,hasCustomData:f,markAsMastered:v}=function(){let[e,t]=(0,n.useState)([]),a=(0,n.useRef)([]);a.current=e;let[r,s]=(0,n.useState)({}),[l,d]=i("mastered_wisdom",{}),[c,x,y,m]=i("revealed_wisdom",{ids:[],dataSet:o.QUOTES}),p=(0,n.useCallback)((e,t)=>{var r;let s=((r=e.dataSet)===o.CUSTOM?a.current:u[r]||u[o.QUOTES]).length||1;switch(t.type){case"REVEAL":return{...e,revealedIds:new Set([...e.revealedIds,t.id])};case"SET_VIEW_MODE":return{...e,viewMode:t.mode};case"SET_INDEX":return{...e,currentIndex:t.index};case"SET_DATASET":return{...e,dataSet:t.dataSet,currentIndex:0,revealedIds:new Set};case"SET_CUSTOM_DATA":return{...e,dataSet:o.CUSTOM,currentIndex:0,revealedIds:new Set};case"NEXT":return{...e,currentIndex:(e.currentIndex+1)%s};case"PREV":return{...e,currentIndex:(e.currentIndex-1+s)%s};case"RESET":return{...h,dataSet:e.dataSet};case"LOAD_PROGRESS":return{...e,revealedIds:new Set(t.ids),dataSet:t.dataSet||e.dataSet};default:return e}},[]),[w,b]=(0,n.useReducer)(p,h),f=(0,n.useMemo)(()=>{let t;let a=w.dataSet;t=r[a]?r[a]:a===o.CUSTOM?e:u[a]||u[o.QUOTES];let s=l[a]||[];if(s.length>0){let e=new Set(s);t=t.filter(t=>!e.has(t.id))}return t},[w.dataSet,e,r,l]),v=(0,n.useMemo)(()=>f&&0!==f.length?w.revealedIds.size/f.length*100:0,[w.revealedIds,f]),q=(0,n.useCallback)(()=>{let t;b({type:"RESET"}),y();let a=w.dataSet;t=a===o.CUSTOM?e:u[a]||u[o.QUOTES],s(e=>({...e,[a]:g(t)}))},[y,w.dataSet,e]),j=(0,n.useCallback)(e=>{b({type:"SET_DATASET",dataSet:e})},[]),S=(0,n.useCallback)(e=>{t(e),s(t=>({...t,[o.CUSTOM]:g(e)})),setTimeout(()=>b({type:"SET_CUSTOM_DATA",data:e}),0)},[]),N=(0,n.useCallback)(e=>{let t=w.dataSet;d(a=>({...a,[t]:[...a[t]||[],e]})),w.currentIndex>=f.length-1&&w.currentIndex>0&&b({type:"SET_INDEX",index:w.currentIndex-1})},[w.dataSet,w.currentIndex,f.length,d]);return{state:w,dispatch:b,progress:v,reset:q,currentData:f,setDataSet:j,setCustomQuotes:S,hasCustomData:e.length>0,markAsMastered:N}}(),{viewMode:q,revealedIds:j,currentIndex:S,dataSet:N}=e,[E,k]=(0,n.useState)(!1),C=(0,n.useCallback)(()=>t({type:"NEXT"}),[t]),T=(0,n.useCallback)(()=>t({type:"PREV"}),[t]);!function({onNext:e,onPrev:t,enabled:a=!0}){}({onNext:C,onPrev:T,enabled:q===r.FOCUS});let D=(0,n.useCallback)(e=>t({type:"REVEAL",id:e}),[t]),O=(0,n.useCallback)(e=>t({type:"SET_VIEW_MODE",mode:e}),[t]),M=0===d.length;return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-slate-900",children:[s.jsx(y,{viewMode:q,setViewMode:O,progress:a,onReset:l,currentDataSet:N,onDataSetChange:e=>{e!==o.CUSTOM||f?c(e):k(!0)},onUploadClick:()=>k(!0)}),s.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-900 pb-20 sm:pb-8",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[E&&(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx(p,{onGenerated:e=>{x(e),k(!1)}}),s.jsx("button",{onClick:()=>k(!1),className:"mt-4 text-slate-500 text-sm hover:text-slate-300",children:"取消"})]}),M?(0,s.jsxs)("div",{className:"text-center py-20",children:[s.jsx("p",{className:"text-slate-500 mb-4",children:"暂无数据"}),s.jsx("button",{onClick:()=>k(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500",children:"上传内容生成问答"})]}):q===r.FEED?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(e=>s.jsx(m,{quote:e,isRevealed:j.has(e.id),onReveal:D,onMastered:v},e.id))}):d[S]?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-8",children:[s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(m,{quote:d[S],isRevealed:j.has(d[S].id),onReveal:D,onMastered:v,isFocusMode:!0},`${N}-${d[S].id}`)}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[s.jsx("button",{onClick:T,className:"p-4 rounded-full bg-slate-800 shadow-md hover:shadow-lg text-indigo-400 transition-all active:scale-95 border border-slate-700","aria-label":"上一个",children:s.jsx(w,{})}),(0,s.jsxs)("div",{className:"text-slate-500 font-bold text-sm",children:[S+1," / ",d.length]}),s.jsx("button",{onClick:C,className:"p-4 rounded-full bg-slate-800 shadow-md hover:shadow-lg text-indigo-400 transition-all active:scale-95 border border-slate-700","aria-label":"下一个",children:s.jsx(b,{})})]}),s.jsx("p",{className:"text-slate-600 text-xs",children:"使用 ← → 方向键切换"})]}):null]})}),s.jsx("footer",{className:"fixed bottom-0 inset-x-0 p-4 flex justify-center pointer-events-none sm:hidden",children:s.jsx("div",{className:"bg-slate-800/90 backdrop-blur text-slate-200 px-6 py-3 rounded-full shadow-2xl flex items-center space-x-4 pointer-events-auto border border-slate-700",children:(0,s.jsxs)("span",{className:"text-xs font-bold tracking-widest uppercase",children:["已学习: ",j.size]})})})]})}},1506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s,metadata:()=>o});var r=a(9510);a(7272);let o={title:"智慧回响",description:"智慧名言与古诗词学习应用"};function s({children:e}){return r.jsx("html",{lang:"zh-CN",children:r.jsx("body",{className:"bg-slate-900",children:e})})}},908:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`D:\next_js\next-js-flashcard-app\app\page.tsx#default`)},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,471],()=>a(1816));module.exports=r})();